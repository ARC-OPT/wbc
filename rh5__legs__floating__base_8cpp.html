<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wbc: tutorials/rh5/rh5_legs_floating_base.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">wbc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_7f801739ae288071006f32dbe37cdff2.html">rh5</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">rh5_legs_floating_base.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="QPOasesSolver_8hpp_source.html">solvers/qpoases/QPOasesSolver.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="RobotModelKDL_8hpp_source.html">robot_models/kdl/RobotModelKDL.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="RobotModelConfig_8hpp_source.html">core/RobotModelConfig.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="VelocitySceneQuadraticCost_8hpp_source.html">scenes/VelocitySceneQuadraticCost.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="CartesianPosPDController_8hpp_source.html">controllers/CartesianPosPDController.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="JointIntegrator_8hpp_source.html">tools/JointIntegrator.hpp</a>&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="rh5__legs__floating__base_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Velocity-based example, Cartesian position control on two 6 dof legs of the RH5 humanoid including floating base and two contact points (feet). In the example the following problem is solved:  </p><p class="formulaDsp">
\[
       \begin{array}{ccc}
       minimize &amp;  \| \mathbf{J}_w\dot{\mathbf{q}} - \mathbf{v}_d \|_2\\
       \mathbf{\dot{q}} &amp; &amp; \\
                &amp; \mathbf{J}_{c,i}\dot{\mathbf{q}} = 0, \, \forall i&amp; \\
                &amp; \dot{\mathbf{q}}_m \leq \dot{\mathbf{q}} \leq \dot{\mathbf{q}}_M&amp; \\
       \end{array}
 \]
</p>
<p> where  </p><p class="formulaDsp">
\[
       \mathbf{v}_d = \mathbf{K}_p(\mathbf{x}_r-\mathbf{x})
 \]
</p>
<p> \(\ddot{\mathbf{q}}\) - Vector of robot joint accelerations<br  />
 \(\dot{\mathbf{v}}_{d}\) - Desired spatial acceleration / controller output <br  />
 \(\mathbf{J}_w\) - Weighted task Jacobian <br  />
 \(\mathbf{W}\) - Diagonal weight matrix<br  />
 \(\mathbf{J}_{c,i}\) - Contact Jacobian of i-th contact point<br  />
 \(\mathbf{x}_r, \mathbf{x}\) - Reference pose, actual pose<br  />
 \(\mathbf{K}_p\) - Derivative gain matrix<br  />
 \(\mathbf{\dot{q}}_m,\mathbf{\dot{q}}_M\) - Joint velocity limits<br  />
</p>
<p >The robot CoM is supposed to move to a fixed target pose. The QP is solved using the QPOases solver. Note that the robot has a floating base and there are two rigid contacts with the environment given by the feet contacting the ground floor. The solver computes the joint velocities required to comply with the desired spatial velocities given by the Cartesian controller. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.5
</small></address>
</body>
</html>
