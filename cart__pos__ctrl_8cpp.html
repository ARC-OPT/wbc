<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wbc: tutorials/kuka_iiwa/cart_pos_ctrl.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">wbc
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search',false);
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0d353d24d0afa59909efab6593124f6d.html">tutorials</a></li><li class="navelem"><a class="el" href="dir_5d45abd4863d15c2c47de1951180b2a2.html">kuka_iiwa</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">cart_pos_ctrl.cpp File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="RobotModelPinocchio_8hpp_source.html">robot_models/pinocchio/RobotModelPinocchio.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="RobotModelConfig_8hpp_source.html">core/RobotModelConfig.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="VelocitySceneQP_8hpp_source.html">scenes/velocity_qp/VelocitySceneQP.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="QPOasesSolver_8hpp_source.html">solvers/qpoases/QPOasesSolver.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="CartesianPosPDController_8hpp_source.html">controllers/CartesianPosPDController.hpp</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="SpatialVelocityTask_8hpp_source.html">tasks/SpatialVelocityTask.hpp</a>&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4" id="r_ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4" name="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&#160;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Simple Velocity-based example, Cartesian position control on a kuka iiwa 7 dof arm. In the example the following problem is solved:       </p><p class="formulaDsp">
\[       \begin{array}{ccc}
       minimize &amp; \| \mathbf{J_w\dot{q}}-\mathbf{v}_{d} \|_2&amp; \\
           \mathbf{\dot{q}} &amp; &amp; \\
          s.t. &amp; \mathbf{\dot{q}}_m \leq \mathbf{\dot{q}} \leq  \mathbf{\dot{q}}_M
       \end{array}
\]
</p>
<p> where   </p><p class="formulaDsp">
\[       \mathbf{v}_d = \mathbf{K}_p(\mathbf{x}_r-\mathbf{x})
\]
</p>
<p> \(\dot{\mathbf{q}}\) - Vector of robot joint velocities<br  />
 \(\mathbf{v}_{d}\) - Desired spatial velocity / controller output <br  />
 \(\mathbf{J}_w=\mathbf{W}\mathbf{J}\) - Weighted task Jacobian <br  />
 \(\mathbf{W}\) - Diagonal weight matrix<br  />
 \(\mathbf{x}_r, \mathbf{x}\) - Reference pose, actual pose<br  />
 \(\mathbf{K}_p\) - Proportional gain matrix<br  />
 \(\mathbf{\dot{q}}_m,\mathbf{\dot{q}}_M\) - Joint velocity limits<br  />
</p>
<p>The robot end effector is supposed to move to a fixed target pose. The QP is solved using the QPOases solver. The solver output will always be within the joint velocity limits, which are defined in the kuka iiwa URDF file. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.2
</small></address>
</div><!-- doc-content -->
</body>
</html>
